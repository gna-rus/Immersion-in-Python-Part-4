# Напишите программу банкомат-
# Начальная симма равна нулю
# Допустимые действия: пополнить, снять, выйти
# Сумма пополнения и снятия кратны 50 у.е
# Процент за снятие - 1.5% от суммы снятия, но не менее 30 у.е и не более 600 у.е
# После каждой третьей операции пополнения или снятия начисляются проценты - 3%
# Нельзя снять больше, чем на счёте
# При превышенцы суммы в 5 млн, вычитать налог на богатство 10% перед каждой операцией, даже ошибочной
# Любое действие выводит сумму денег
#
#  Возьмите задачу о банкомате из семинара 2. Разбейте её на отдельные операции — функции. Дополнительно сохраняйте все операции поступления и снятия средств в список.

def wealth_tax(sum_of_money):
    sum_of_money *= 0.9
    return sum_of_money

def add_money(sum_of_money, count):
    sum_of_money += 50
    count += 1
    if count == 3:
        sum_of_money *= 1.03
        count = 0

    if sum_of_money >= 5_000_000:
        sum_of_money = wealth_tax(sum_of_money)

    print(f"Баланс счета: {sum_of_money}")
    return  sum_of_money, count

def del_money(sum_of_money, count):
    sum_of_money -= 50
    count += 1

    if count == 3:
        sum_of_money *= 1.03
        count = 0

    tax = sum_of_money*0.015

    if tax < 30:
        tax = 30
    elif tax > 600:
        tax = 600

    sum_of_money -= tax

    if sum_of_money >= 5_000_000:
        sum_of_money = wealth_tax(sum_of_money)

    print(f"Баланс счета: {sum_of_money}")
    return sum_of_money, count


sum_of_money = 4_000_000
count = 0

print(f"Меню: \n1-пополнить счет \n2-снять деньги со счета \n3-Выйти")


while True:
    n = int(input())
    if n == 1:
        sum_of_money, count = add_money(sum_of_money, count)
    elif n == 2:
        sum_of_money, count = del_money(sum_of_money, count)
    elif n == 3:
        break
    else:
        print("Не корректный ввод")

